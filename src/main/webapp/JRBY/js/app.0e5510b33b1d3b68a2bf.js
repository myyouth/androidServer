webpackJsonp([1],{"4ml/":function(a,e){},Gnxq:function(a,e){},NHnr:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("7+uW"),n={render:function(){var a=this.$createElement,e=this._self._c||a;return e("div",{staticStyle:{height:"100%"},attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=t("VU/8")({name:"App"},n,!1,function(a){t("ZsvG")},null,null).exports,r=t("/ocq"),l=t("Fd2+");s.default.use(l.d),s.default.use(l.c);var o={name:"JobBooking",data:function(){return{number:"",scannerNumber:"",transferCardNumber:"",materialNumber:"",flag:!0,processNumber:"",processID:"",orderNumber:"",inputNumber:"",outputNumber:"",badID:"",badProject:"",showProcessPicker:!1,showBadPicker:!1,unitTime:1,hourlyWage:1,processes:[{processID:"12",text:"工序1"},{processID:"13",text:"工序2"},{processID:"14",text:"工序3"},{processID:"15",text:"工序4"},{processID:"16",text:"工序5"}],bads:[{BadID:"12",text:"工序1"},{BadID:"13",text:"工序2"},{BadID:"14",text:"工序3"},{BadID:"15",text:"工序4"},{BadID:"16",text:"工序5"}]}},components:{},created:function(){this.getAllBadDes()},mounted:function(){window.scannerSearch=this.scannerSearch},computed:{badNumber:function(){return(this.inputNumber-this.outputNumber).toFixed(0)<=0&&(this.badProject="",this.badID=""),(this.inputNumber-this.outputNumber).toFixed(0)},taskTime:function(){return(this.outputNumber/this.unitTime).toFixed(2)},badProjectshow:function(){return this.badNumber>0},charges:function(){return(this.taskTime*this.hourlyWage).toFixed(2)}},watch:{scannerNumber:{deep:!0,handler:function(a,e){this.number=a,this.onSearch()}}},methods:{onSearch:function(){var a=this;android.showLodingDialog("正在获取工序流转卡数据..."),this.$api.get("/selectProcessBooking",{Number:this.number},function(e){android.closeLodingDialog(),a.clear(),e.status>=200&&e.status<300?0==e.data.msg.transferCardNumber.length?l.e.fail("工序流转单不存在,请确认工序流转卡编码"):0==e.data.msg.processes.length?l.e.fail("当前工单已报工完毕"):(l.e.success("获取工序流转单成功"),a.transferCardNumber=e.data.msg.transferCardNumber,a.orderNumber=e.data.msg.orderNumber,a.materialNumber=e.data.msg.materialNumber,a.onProcessConfirm(e.data.msg.processes),a.hourlyWage=e.data.msg.hourlyWage,a.bads=e.data.msg.badDec,a.flag=!1):l.e.fail("获取工序流转单时出现异常，请重新操作")})},onProcessConfirm:function(a){this.processNumber=a.text,this.processID=a.processID,this.unitTime=a.unitTime},onBadConfirm:function(a){this.badID=a.badID,this.badProject=a.text,this.showBadPicker=!1},clear:function(){this.transferCardNumber="",this.processNumber="",this.processID="",this.inputNumber="",this.outputNumber="",this.badProject="",this.badID="",this.materialNumber=""},submit:function(){var a=this;this.badNumber<0?l.e.fail("产出数量不得大于投入数量"):this.badNumber>0&&""==this.badID?l.e.fail("存在不良，请填写不良项目"):this.processID.length>0&&this.inputNumber.length>0&&this.outputNumber.length>0&&this.taskTime.length>0?l.a.confirm({title:"确认",message:"请确认当前数据已填写正确"}).then(function(){android.showLodingDialog("正在提交工序流转卡数据...");var e={transferCardNumber:a.transferCardNumber,processID:a.processID,processNumber:a.processNumber,inputNumber:a.inputNumber,outputNumber:a.outputNumber,taskTime:a.taskTime,badID:a.badID,badNumber:a.badNumber,badProject:a.badProject,userID:android.getUserID(),orderNumber:a.orderNumber};a.$api.get("/submitProcessBooking",{submitData:e},function(a){android.closeLodingDialog(),a.status>=200&&a.status<300?"true"==a.data.success?l.a.alert({message:a.data.msg}).then(function(){android.back()}):l.e.fail(a.data.msg):l.e.fail("数据提交出现异常,请重新提交")})}).catch(function(){}):l.e.fail("请填写必填项")},getAllBadDes:function(){var a=this;android.showLodingDialog("正在加载基础数据..."),this.$api.get("/selectAllBadDes",{},function(e){android.closeLodingDialog(),e.status>=200&&e.status<300&&"true"==e.data.success?a.bads=e.data.msg:android.alertDialog("警告","获取不良项目出现异常，请重新打开")})},openScanner:function(){android.openScanner()},scannerSearch:function(a){this.scannerNumber=a}}},c={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("Div",{staticStyle:{padding:"0.2rem"}},[t("van-search",{staticStyle:{"margin-right":"1rem"},attrs:{placeholder:"请输入工序流转卡批号","show-action":"",shape:"round",clear:"","right-icon":""},on:{search:a.onSearch},model:{value:a.number,callback:function(e){a.number=e},expression:"number"}},[t("div",{attrs:{slot:"action",disabled:"loading"},on:{click:a.onSearch},slot:"action"},[a._v("搜索")]),a._v(" "),t("div",{attrs:{slot:"right-icon"},on:{click:a.openScanner},slot:"right-icon"},[t("van-icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"saomiao"}})],1)]),a._v(" "),t("van-cell-group",[a._e(),a._v(" "),t("van-field",{attrs:{label:"型号：",disabled:"","label-align":"left"},model:{value:a.materialNumber,callback:function(e){a.materialNumber=e},expression:"materialNumber"}}),a._v(" "),a._e(),a._v(" "),t("van-field",{attrs:{readonly:"",disabled:"",label:"工序号：","label-align":"left",value:a.processNumber}}),a._v(" "),t("van-field",{attrs:{required:"",disabled:a.flag,label:"投入数：","label-align":"left",type:"number"},model:{value:a.inputNumber,callback:function(e){a.inputNumber=e},expression:"inputNumber"}}),a._v(" "),t("van-field",{attrs:{required:"",disabled:a.flag,label:"产出数：","label-align":"left",type:"number"},model:{value:a.outputNumber,callback:function(e){a.outputNumber=e},expression:"outputNumber"}}),a._v(" "),t("van-field",{attrs:{label:"不良数：","label-align":"left",disabled:"",type:"number"},model:{value:a.badNumber,callback:function(e){a.badNumber=e},expression:"badNumber"}}),a._v(" "),a._e(),a._v(" "),t("van-field",{attrs:{disabled:"",label:"加工费：","label-align":"left",type:"number"},model:{value:a.charges,callback:function(e){a.charges=e},expression:"charges"}}),a._v(" "),0==a.flag&&1==a.badProjectshow?t("van-field",{attrs:{readonly:"",clickable:"",label:"不良项目：","label-align":"left",value:a.badProject,placeholder:"选择不良项目"},on:{click:function(e){a.showBadPicker=!0}}}):t("van-field",{attrs:{readonly:"",clickable:"",label:"不良项目：","label-align":"left",value:a.badProject,placeholder:"选择不良项目"}}),a._v(" "),t("van-popup",{attrs:{position:"bottom"},model:{value:a.showBadPicker,callback:function(e){a.showBadPicker=e},expression:"showBadPicker"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:a.bads},on:{cancel:function(e){a.showBadPicker=!1},confirm:a.onBadConfirm}})],1)],1),a._v(" "),t("div",{staticStyle:{"margin-top":"1rem"}},[t("van-row",[t("van-col",{attrs:{span:"6"}}),a._v(" "),t("van-col",{attrs:{span:"6",align:"center"}},[t("van-button",{staticClass:"button",attrs:{round:"",size:"small"},on:{click:a.clear}},[a._v("清空")])],1),a._v(" "),t("van-col",{attrs:{span:"6",align:"center"}},[t("van-button",{staticClass:"button",attrs:{round:"",size:"small",type:"danger",disabled:a.flag},on:{click:a.submit}},[a._v("提交")])],1),a._v(" "),t("van-col",{attrs:{span:"6"}})],1)],1)],1)},staticRenderFns:[]};var u=t("VU/8")(o,c,!1,function(a){t("Gnxq")},"data-v-47e309f2",null).exports,d={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"hello"},[t("h1",[a._v(a._s(a.msg))]),a._v(" "),t("h2",[a._v("Essential Links")]),a._v(" "),a._m(0),a._v(" "),t("h2",[a._v("Ecosystem")]),a._v(" "),a._m(1)])},staticRenderFns:[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ul",[t("li",[t("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[a._v("\n        Core Docs\n      ")])]),a._v(" "),t("li",[t("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[a._v("\n        Forum\n      ")])]),a._v(" "),t("li",[t("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[a._v("\n        Community Chat\n      ")])]),a._v(" "),t("li",[t("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[a._v("\n        Twitter\n      ")])]),a._v(" "),t("br"),a._v(" "),t("li",[t("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[a._v("\n        Docs for This Template\n      ")])])])},function(){var a=this.$createElement,e=this._self._c||a;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var m=t("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},d,!1,function(a){t("UEbX")},"data-v-d8ec41bc",null).exports,b={name:"RevisePassword",data:function(){return{password:"",password_comfirm:""}},methods:{clear:function(){this.password="",this.password_comfirm=""},submit:function(){0==this.password_comfirm.length||0==this.password.length?l.e.fail("填写密码不得为空"):this.password!=this.password_comfirm?l.e.fail("填写密码不一致"):(android.showLodingDialog("正在修改账号密码..."),this.$api.get("/revisePassword",{staffID:android.getUserID(),staffPassword:this.password},function(a){android.closeLodingDialog(),a.status>=200&&a.status<300?(android.toastLog(a.data.msg),android.back()):l.e.fail("重置密码出现异常")}))}},computed:{}},v={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticStyle:{padding:"0.2rem"}},[t("van-field",{attrs:{type:"password",placeholder:"请输入登录密码",clearable:"","label-width":"3.5rem"},model:{value:a.password,callback:function(e){a.password=e},expression:"password"}}),a._v(" "),t("van-field",{attrs:{type:"password",placeholder:"请再次输入登录密码",clearable:"","label-width":"3.5rem"},model:{value:a.password_comfirm,callback:function(e){a.password_comfirm=e},expression:"password_comfirm"}}),a._v(" "),t("van-row",{staticStyle:{"margin-top":"1rem"}},[t("van-col",{attrs:{span:"6"}}),a._v(" "),t("van-col",{attrs:{span:"6",align:"center"}},[t("van-button",{staticClass:"button",attrs:{round:"",size:"small"},on:{click:a.clear}},[a._v("清空")])],1),a._v(" "),t("van-col",{attrs:{span:"6",align:"center"}},[t("van-button",{staticClass:"button",attrs:{round:"",size:"small",type:"danger"},on:{click:a.submit}},[a._v("提交")])],1),a._v(" "),t("van-col",{attrs:{span:"6"}})],1)],1)},staticRenderFns:[]},f=t("VU/8")(b,v,!1,null,null,null).exports,p={data:function(){return{list:[],loading:!1,finished:!1}},methods:{onLoad:function(){var a=this;setTimeout(function(){for(var e=0;e<10;e++)a.list.push(a.list.length+1);a.loading=!1,a.list.length>=40&&(a.finished=!0)},1e3)}}},h={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("van-list",{attrs:{finished:a.finished,"finished-text":"没有更多了"},on:{load:a.onLoad},model:{value:a.loading,callback:function(e){a.loading=e},expression:"loading"}},[t("van-row",{attrs:{type:"flex",justify:"center"}},[t("van-col",{attrs:{span:"6"}},[a._v("span: 6")]),a._v(" "),t("van-col",{attrs:{span:"6"}},[a._v("span: 6")]),a._v(" "),t("van-col",{attrs:{span:"6"}},[a._v("span: 6")])],1)],1)},staticRenderFns:[]},g=t("VU/8")(p,h,!1,null,null,null).exports,_={data:function(){return{feedNumber:"",list:[],loading:!1,finished:!1}},methods:{onLoad:function(){this.onSearch()},onSearch:function(){var a=this;l.e.loading({duration:0,message:"加载中...",forbidClick:!0}),this.$api.get("/searchAllProFeed",{feedNumber:this.feedNumber},function(e){l.e.clear(),e.status>=200&&e.status<300?"true"==e.data.success?a.list=e.data.msg:l.e.fail(e.data.msg):l.e.fail("获取数据时出现异常，请重新操作")}),this.finished=!0},createProRequisit:function(a){this.$router.push({path:"/producionFeedingForProductRequisit",query:{number:a}})}}},k={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("van-search",{staticStyle:{"margin-right":"1rem","margin-left":"0.1rem"},attrs:{placeholder:"请输入生产投料单编码","show-action":"",shape:"round",clear:"","right-icon":""},on:{search:a.onSearch},model:{value:a.feedNumber,callback:function(e){a.feedNumber=e},expression:"feedNumber"}},[t("div",{attrs:{slot:"action",disabled:"loading"},on:{click:a.onSearch},slot:"action"},[a._v("搜索")])]),a._v(" "),t("van-list",{staticStyle:{"margin-right":"1rem","margin-left":"0.1rem"},attrs:{finished:a.finished,"finished-text":"没有更多了"},on:{load:a.onLoad},model:{value:a.loading,callback:function(e){a.loading=e},expression:"loading"}},a._l(a.list,function(e){return t("van-cell",{key:e,attrs:{title:e},on:{click:function(t){return a.createProRequisit(e)}}})}),1)],1)},staticRenderFns:[]},N=t("VU/8")(_,k,!1,null,null,null).exports,w=t("mvHQ"),y=t.n(w),x={data:function(){return{barcodeNumber:"",baseData:{type:"",typeId:"",subject:"",subjectId:"",purpose:"",dept:"",deptId:""},activeName:"",showSubjectPicker:!1,materialList:[],subjects:[{id:1,text:133},{id:2,text:13}]}},created:function(){this.searchProFeedInfo(),this.searchAllAccount()},methods:{showLoading:function(a){l.e.loading({duration:0,message:a,forbidClick:!0})},searchProFeedInfo:function(){var a=this;this.showLoading("正在获取数据..."),this.$api.get("/searchProFeedInfo",{feedNumber:this.$route.query.number},function(e){return e.status>=200&&e.status<300?"true"!=e.data.success?(l.e.fail(e.data.msg),void l.e.clear()):(a.materialList=e.data.data,a.baseData.type=e.data.typeName,a.baseData.typeId=e.data.type,a.baseData.dept=e.data.dept,a.baseData.deptId=e.data.deptId,void l.e.clear()):(l.e.fail("数据获取异常！"),void l.e.clear())})},searchAllAccount:function(){var a=this;this.showLoading("正在获取数据..."),this.$api.get("/searchAllAccount",{},function(e){return e.status>=200&&e.status<300?"true"!=e.data.success?(l.e.fail(e.data.msg),void l.e.clear()):(a.subjects=e.data.subjects,void l.e.clear()):(l.e.fail("数据获取异常！"),void l.e.clear())})},onSubmit:function(){l.e.loading({duration:0,message:"正在提交数据...",forbidClick:!0}),console.log(this.materialList),console.log(this.baseData),this.$api.post("/submitProductRequisit",{baseData:y()(this.baseData),materialList:y()(this.materialList)},function(a){return a.status>=200&&a.status<300?"true"!=a.data.success?(l.e.clear(),void l.e.fail(a.data.msg)):void l.e.success("数据提交成功"):(l.e.clear(),void l.e.fail("数据提交异常！"))})},onBack:function(){this.$router.go(-1)},onBSubjectConfirm:function(a){this.baseData.subject=a.text,this.baseData.subjectId=a.id,this.showSubjectPicker=!1},deleteMaterial:function(){var a=this;this.materialList.some(function(e,t){if(e.id==a.activeName)return a.materialList.splice(t,1),!0})},onSearch:function(){this.materialList.forEach(function(a){a.materialActualSum=10})}}},D={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"body-bg"},[t("div",{staticClass:"form-item"},[t("van-search",{attrs:{placeholder:"","show-action":"",shape:"round",clear:"","right-icon":""},on:{search:a.onSearch,keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.onSearch(e)}},model:{value:a.barcodeNumber,callback:function(e){a.barcodeNumber=e},expression:"barcodeNumber"}},[t("div",{attrs:{slot:"action",disabled:"loading"},on:{click:a.onSearch},slot:"action"},[a._v("搜索")])])],1),a._v(" "),t("div",{staticClass:"form-item"},[t("h2",{staticClass:"form-header"},[a._v("基本信息")]),a._v(" "),t("van-row",[t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"领料类型：",disabled:"","label-align":"left"},model:{value:a.baseData.type,callback:function(e){a.$set(a.baseData,"type",e)},expression:"baseData.type"}})],1),a._v(" "),t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"对方科目：",disabled:"","label-align":"left",readonly:"",clickable:""},on:{click:function(e){a.showSubjectPicker=!0}},model:{value:a.baseData.subject,callback:function(e){a.$set(a.baseData,"subject",e)},expression:"baseData.subject"}}),a._v(" "),t("van-popup",{attrs:{position:"bottom"},model:{value:a.showSubjectPicker,callback:function(e){a.showSubjectPicker=e},expression:"showSubjectPicker"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:a.subjects},on:{cancel:function(e){a.showSubjectPicker=!1},confirm:a.onBSubjectConfirm}})],1)],1)],1),a._v(" "),t("van-row",[t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"领料部门：",disabled:"","label-align":"left"},model:{value:a.baseData.dept,callback:function(e){a.$set(a.baseData,"dept",e)},expression:"baseData.dept"}})],1),a._v(" "),t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"领料用途：","label-align":"left",autosize:"",rows:"1",type:"textarea"},model:{value:a.baseData.purpose,callback:function(e){a.$set(a.baseData,"purpose",e)},expression:"baseData.purpose"}})],1)],1)],1),a._v(" "),t("div",{staticClass:"form-item"},[t("h2",{staticClass:"form-header"},[a._v("物料明细")]),a._v(" "),t("van-collapse",{attrs:{accordion:""},model:{value:a.activeName,callback:function(e){a.activeName=e},expression:"activeName"}},a._l(a.materialList,function(e){return t("van-collapse-item",{key:e.id,attrs:{title:e.materialName,name:e.id}},[t("van-row",[t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"物料编码：",disabled:"","label-align":"left"},model:{value:e.materialNumber,callback:function(t){a.$set(e,"materialNumber",t)},expression:"item.materialNumber"}})],1),a._v(" "),t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"批号：",disabled:"","label-align":"left"},model:{value:e.materialBatch,callback:function(t){a.$set(e,"materialBatch",t)},expression:"item.materialBatch"}})],1)],1),a._v(" "),t("van-row",[t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"仓库：",disabled:"","label-align":"left"},model:{value:e.stockName,callback:function(t){a.$set(e,"stockName",t)},expression:"item.stockName"}})],1),a._v(" "),t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"仓位：",disabled:"","label-align":"left"},model:{value:e.stockPlace,callback:function(t){a.$set(e,"stockPlace",t)},expression:"item.stockPlace"}})],1)],1),a._v(" "),t("van-row",[t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{disabled:"",label:"申请数量：","label-align":"left",type:"number"},model:{value:e.materialSum,callback:function(t){a.$set(e,"materialSum",t)},expression:"item.materialSum"}})],1),a._v(" "),t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{required:"",label:"实发数量：","label-align":"left",type:"number"},model:{value:e.materialActualSum,callback:function(t){a.$set(e,"materialActualSum",t)},expression:"item.materialActualSum"}})],1)],1),a._v(" "),t("van-row",[t("van-col",{attrs:{span:"6"}}),a._v(" "),t("van-col",{attrs:{span:"6"}}),a._v(" "),t("van-col",{attrs:{span:"6"}}),a._v(" "),t("van-col",{attrs:{span:"6",align:"center"}},[t("van-button",{staticClass:"button",attrs:{size:"mini",type:"danger"},on:{click:a.deleteMaterial}},[a._v("删除")])],1)],1)],1)}),1)],1),a._v(" "),t("div",[t("van-row",[t("van-col",{attrs:{span:"6"}}),a._v(" "),t("van-col",{attrs:{span:"6",align:"center"}},[t("van-button",{staticClass:"button",attrs:{round:"",size:"small"},on:{click:a.onBack}},[a._v("返回")])],1),a._v(" "),t("van-col",{attrs:{span:"6",align:"center"}},[t("van-button",{staticClass:"button",attrs:{round:"",size:"small",type:"danger"},on:{click:a.onSubmit}},[a._v("提交")])],1),a._v(" "),t("van-col",{attrs:{span:"6"}})],1)],1)])},staticRenderFns:[]},S=t("VU/8")(x,D,!1,null,null,null).exports,P={data:function(){return{ASNNumber:"",list:[],loading:!1,finished:!1}},methods:{onLoad:function(){this.onSearch()},onSearch:function(){l.e.loading({duration:0,message:"加载中...",forbidClick:!0}),this.finished=!0},createProRequisit:function(a){this.$router.push({path:"/consignmentNoteForSaleIssue",query:{number:a}})}}},C={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("van-search",{staticStyle:{"margin-right":"1rem","margin-left":"0.1rem"},attrs:{placeholder:"请输入发货通知单编码","show-action":"",shape:"round",clear:"","right-icon":""},on:{search:a.onSearch},model:{value:a.ASNNumber,callback:function(e){a.ASNNumber=e},expression:"ASNNumber"}},[t("div",{attrs:{slot:"action",disabled:"loading"},on:{click:a.onSearch},slot:"action"},[a._v("搜索")])]),a._v(" "),t("van-list",{staticStyle:{"margin-right":"1rem","margin-left":"0.1rem"},attrs:{finished:a.finished,"finished-text":"没有更多了"},on:{load:a.onLoad},model:{value:a.loading,callback:function(e){a.loading=e},expression:"loading"}},a._l(a.list,function(e){return t("van-cell",{key:e,attrs:{title:e},on:{click:function(t){return a.createProRequisit(e)}}})}),1)],1)},staticRenderFns:[]},$=t("VU/8")(P,C,!1,null,null,null).exports,B={data:function(){return{barcodeNumber:"",baseData:{type:"",typeId:"",salesWay:"",salesWayId:"",purpose:"",dept:"",deptId:""},activeName:"",showSalesWayPicker:!1,materialList:[],salesWays:[{id:1,text:133},{id:2,text:13}]}},created:function(){},methods:{showLoading:function(a){l.e.loading({duration:0,message:a,forbidClick:!0})},onSubmit:function(){l.e.loading({duration:0,message:"正在提交数据...",forbidClick:!0}),console.log(this.materialList),console.log(this.baseData),this.$api.post("/submitProductRequisit",{baseData:y()(this.baseData),materialList:y()(this.materialList)},function(a){return a.status>=200&&a.status<300?"true"!=a.data.success?(l.e.clear(),void l.e.fail(a.data.msg)):void l.e.success("数据提交成功"):(l.e.clear(),void l.e.fail("数据提交异常！"))})},onBack:function(){this.$router.go(-1)},onSalesWayConfirm:function(a){this.baseData.salesWay=a.text,this.baseData.salesWayId=a.id,this.showSalesWayPicker=!1},deleteMaterial:function(){var a=this;console.log(this.activeName),this.materialList.some(function(e,t){if(console.log(e.id),e.id==a.activeName)return a.materialList.splice(t,1),!0})},onSearch:function(){this.materialList.forEach(function(a){a.materialActualSum=10})}}},I={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"body-bg"},[t("div",{staticClass:"form-item"},[t("van-search",{attrs:{placeholder:"","show-action":"",shape:"round",clear:"","right-icon":""},on:{search:a.onSearch,keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.onSearch(e)}},model:{value:a.barcodeNumber,callback:function(e){a.barcodeNumber=e},expression:"barcodeNumber"}},[t("div",{attrs:{slot:"action",disabled:"loading"},on:{click:a.onSearch},slot:"action"},[a._v("搜索")])])],1),a._v(" "),t("div",{staticClass:"form-item"},[t("h2",{staticClass:"form-header"},[a._v("基本信息")]),a._v(" "),t("van-row",[t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"销售业务类型：","label-width":"2rem",disabled:"","label-align":"left"},model:{value:a.baseData.type,callback:function(e){a.$set(a.baseData,"type",e)},expression:"baseData.type"}})],1),a._v(" "),t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"销售方式：",disabled:"","label-align":"left",readonly:"",clickable:""},on:{click:function(e){a.showSalesWayPicker=!0}},model:{value:a.baseData.salesWay,callback:function(e){a.$set(a.baseData,"salesWay",e)},expression:"baseData.salesWay"}}),a._v(" "),t("van-popup",{attrs:{position:"bottom"},model:{value:a.showSalesWayPicker,callback:function(e){a.showSalesWayPicker=e},expression:"showSalesWayPicker"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:a.salesWays},on:{cancel:function(e){a.showSalesWayPicker=!1},confirm:a.onSalesWayConfirm}})],1)],1)],1),a._v(" "),t("van-row",[t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"购货单位：",disabled:"","label-align":"left","label-width":"2rem"},model:{value:a.baseData.purchasingUnit,callback:function(e){a.$set(a.baseData,"purchasingUnit",e)},expression:"baseData.purchasingUnit"}})],1)],1)],1),a._v(" "),t("div",{staticClass:"form-item"},[t("h2",{staticClass:"form-header"},[a._v("物料明细")]),a._v(" "),t("van-collapse",{attrs:{accordion:""},model:{value:a.activeName,callback:function(e){a.activeName=e},expression:"activeName"}},a._l(a.materialList,function(e){return t("van-collapse-item",{key:e.id,attrs:{title:e.materialName,name:e.id}},[t("van-row",[t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"物料编码：",disabled:"","label-align":"left"},model:{value:e.materialNumber,callback:function(t){a.$set(e,"materialNumber",t)},expression:"item.materialNumber"}})],1),a._v(" "),t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"批号：",disabled:"","label-align":"left"},model:{value:e.materialBatch,callback:function(t){a.$set(e,"materialBatch",t)},expression:"item.materialBatch"}})],1)],1),a._v(" "),t("van-row",[t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"仓库：",disabled:"","label-align":"left"},model:{value:e.stockName,callback:function(t){a.$set(e,"stockName",t)},expression:"item.stockName"}})],1),a._v(" "),t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"仓位：",disabled:"","label-align":"left"},model:{value:e.stockPlace,callback:function(t){a.$set(e,"stockPlace",t)},expression:"item.stockPlace"}})],1)],1),a._v(" "),t("van-row",[t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{disabled:"",label:"申请数量：","label-align":"left",type:"number"},model:{value:e.materialSum,callback:function(t){a.$set(e,"materialSum",t)},expression:"item.materialSum"}})],1),a._v(" "),t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{required:"",label:"实发数量：","label-align":"left",type:"number"},model:{value:e.materialActualSum,callback:function(t){a.$set(e,"materialActualSum",t)},expression:"item.materialActualSum"}})],1)],1),a._v(" "),t("van-row",[t("van-col",{attrs:{span:"6"}}),a._v(" "),t("van-col",{attrs:{span:"6"}}),a._v(" "),t("van-col",{attrs:{span:"6"}}),a._v(" "),t("van-col",{attrs:{span:"6",align:"center"}},[t("van-button",{staticClass:"button",attrs:{size:"mini",type:"danger"},on:{click:a.deleteMaterial}},[a._v("删除")])],1)],1)],1)}),1)],1),a._v(" "),t("div",[t("van-row",[t("van-col",{attrs:{span:"6"}}),a._v(" "),t("van-col",{attrs:{span:"6",align:"center"}},[t("van-button",{staticClass:"button",attrs:{round:"",size:"small"},on:{click:a.onBack}},[a._v("返回")])],1),a._v(" "),t("van-col",{attrs:{span:"6",align:"center"}},[t("van-button",{staticClass:"button",attrs:{round:"",size:"small",type:"danger"},on:{click:a.onSubmit}},[a._v("提交")])],1),a._v(" "),t("van-col",{attrs:{span:"6"}})],1)],1)])},staticRenderFns:[]},L=t("VU/8")(B,I,!1,null,null,null).exports,j={data:function(){return{barcodeNumber:"",list:[],loading:!1,finished:!1,activeName:"",materialList:[]}},methods:{dealBarcodeNumber:function(){var a=this;l.e.loading({duration:0,message:"获取数据...",forbidClick:!0}),this.$api.get("/searchMaterial",{BarcodeNumber:this.barcodeNumber},function(e){if(!(e.status>=200&&e.status<300))return l.e.clear(),void l.e.fail("数据获取异常！");if("true"!=e.data.success)return l.e.clear(),void l.e.fail(e.data.msg);var t=JSON.parse(e.data.msg);a.$set(t,"id",a.materialList.length+1),a.$set(t,"materialBarcode",a.barcodeNumber),a.materialList.push(t),l.e.clear(),l.e.success("成功")})},onBack:function(){},onSubmit:function(){l.e.loading({duration:0,message:"数据提交中...",forbidClick:!0});var a=[];this.materialList.some(function(e,t){a.push(e.materialBarcode)}),this.$api.post("/createBoxBarcode",{BarcodeNumber:this.barcodeNumber,mateBarcodeList:y()(a)},function(a){return a.status>=200&&a.status<300?"true"!=a.data.success?(l.e.clear(),void l.e.fail(a.data.msg)):(l.e.clear(),void l.e.success(a.data.msg)):(l.e.clear(),void l.e.fail("数据获取异常！"))})},deleteMaterial:function(){var a=this;this.materialList.some(function(e,t){if(e.id==a.activeName)return a.materialList.splice(t,1),!0})}}},F={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"body-bg"},[t("div",{staticClass:"form-item"},[t("van-search",{staticStyle:{"margin-right":"1rem","margin-left":"0.1rem"},attrs:{placeholder:"请输入条码","show-action":"",shape:"round",clear:"","right-icon":""},on:{search:a.dealBarcodeNumber,keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.dealBarcodeNumber(e)}},model:{value:a.barcodeNumber,callback:function(e){a.barcodeNumber=e},expression:"barcodeNumber"}},[t("div",{attrs:{slot:"action",disabled:"loading"},on:{click:a.dealBarcodeNumber},slot:"action"},[a._v("搜索")])])],1),a._v(" "),t("div",{staticClass:"form-item"},[t("h2",{staticClass:"form-header"},[a._v("条码明细")]),a._v(" "),t("van-collapse",{attrs:{accordion:""},model:{value:a.activeName,callback:function(e){a.activeName=e},expression:"activeName"}},a._l(a.materialList,function(e){return t("van-collapse-item",{key:e.id,attrs:{title:e.materialBarcode,name:e.id}},[t("van-row",[t("van-col",{attrs:{span:"24"}},[t("van-field",{attrs:{label:"物料名称：",disabled:"","label-align":"left"},model:{value:e.mName,callback:function(t){a.$set(e,"mName",t)},expression:"item.mName"}})],1)],1),a._v(" "),t("van-row",[t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"物料编码：",disabled:"","label-align":"left"},model:{value:e.mNumber,callback:function(t){a.$set(e,"mNumber",t)},expression:"item.mNumber"}})],1),a._v(" "),t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"批号：",disabled:"","label-align":"left"},model:{value:e.batch,callback:function(t){a.$set(e,"batch",t)},expression:"item.batch"}})],1)],1),a._v(" "),t("van-row",[t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"仓库：",disabled:"","label-align":"left"},model:{value:e.warehouse,callback:function(t){a.$set(e,"warehouse",t)},expression:"item.warehouse"}})],1),a._v(" "),t("van-col",{attrs:{span:"12"}},[t("van-field",{attrs:{label:"仓位：",disabled:"","label-align":"left"},model:{value:e.position,callback:function(t){a.$set(e,"position",t)},expression:"item.position"}})],1)],1),a._v(" "),t("van-row",[t("van-col",{attrs:{span:"6"}}),a._v(" "),t("van-col",{attrs:{span:"6"}}),a._v(" "),t("van-col",{attrs:{span:"6"}}),a._v(" "),t("van-col",{attrs:{span:"6",align:"center"}},[t("van-button",{staticClass:"button",attrs:{size:"mini",type:"danger"},on:{click:a.deleteMaterial}},[a._v("删除")])],1)],1)],1)}),1)],1),a._v(" "),t("div",[t("van-row",[t("van-col",{attrs:{span:"6"}}),a._v(" "),t("van-col",{attrs:{span:"6",align:"center"}},[t("van-button",{staticClass:"button",attrs:{round:"",size:"small"},on:{click:a.onBack}},[a._v("返回")])],1),a._v(" "),t("van-col",{attrs:{span:"6",align:"center"}},[t("van-button",{staticClass:"button",attrs:{round:"",size:"small",type:"danger"},on:{click:a.onSubmit}},[a._v("装箱")])],1),a._v(" "),t("van-col",{attrs:{span:"6"}})],1)],1)])},staticRenderFns:[]},E=t("VU/8")(j,F,!1,null,null,null).exports;s.default.use(r.a);var W=new r.a({routes:[{path:"/jobBooking",name:"JobBooking",component:u},{path:"/helloWorld",name:"HelloWorld",component:m},{path:"/revisePassword",name:"RevisePassword",component:f},{path:"/inventory",name:"inventory",component:g},{path:"/producionFeeding",name:"producionFeeding",component:N},{path:"/producionFeedingForProductRequisit",name:"producionFeedingForProductRequisit",component:S},{path:"/consignmentNote",name:"ConsignmentNote",component:$},{path:"/consignmentNoteForSaleIssue",name:"ConsignmentNoteForSaleIssue",component:L},{path:"/boxing",name:"Boxing",component:E}]}),A=(t("4ml/"),t("zL8q")),R=t.n(A),T=(t("sVYa"),t("mtWM")),U=t.n(T).a.create({baseURL:"",withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},transformRequest:[function(a){var e="";for(var t in a)!0===a.hasOwnProperty(t)&&(e+=encodeURIComponent(t)+"="+encodeURIComponent(a[t])+"&");return e}]});function q(a,e,t,s){U({method:a,url:e,data:"POST"===a||"PUT"===a?t:null,params:"GET"===a||"DELETE"===a?t:null}).then(function(a){s(a)}).catch(function(a){s(a)})}var z={get:function(a,e,t){return q("GET",a,e,t)},post:function(a,e,t){return q("POST",a,e,t)},put:function(a,e,t){return q("PUT",a,e,t)},delete:function(a,e,t){return q("DELETE",a,e,t)}};t("bs3D"),t("TtOz");s.default.use(l.e),s.default.use(l.b),s.default.prototype.$api=z,s.default.use(R.a,{size:"small",zIndex:3e3}),s.default.use(l.f),s.default.config.productionTip=!1,new s.default({el:"#app",router:W,components:{App:i},template:"<App/>"})},TtOz:function(a,e){},UEbX:function(a,e){},ZsvG:function(a,e){},bs3D:function(a,e){}},["NHnr"]);
//# sourceMappingURL=app.0e5510b33b1d3b68a2bf.js.map